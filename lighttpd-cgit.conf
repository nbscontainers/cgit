server.modules += ( "mod_cgi", "mod_rewrite", "mod_alias", "mod_setenv" )

server.document-root := "/usr/share/webapps/cgit/"

index-file.names     = ( "cgit.cgi" )
alias.url           += ( "/git-http-backend.cgi" => "/usr/libexec/git-core/git-http-backend" )
cgi.assign           = ( "" => "" )
url.rewrite-once     = (
    "^/cgit/cgit.css"   => "/cgit.css",
    "^/cgit/cgit.png"   => "/cgit.png",
    "^/([^?/]+/[^?]*/(?:info/refs|git-upload-pack))(?:(\?.*))?$"   => "/git-http-backend.cgi/$1$2",
    "^/([^?/]+/[^?]*)?(?:\?(.*))?$"   => "/cgit.cgi?url=$1&$2",
)
setenv.add-environment = (
    "GIT_PROJECT_ROOT" => "/repos",
    "GIT_HTTP_EXPORT_ALL" => "1"
)
